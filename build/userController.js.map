{"version":3,"sources":["../server/userController.js"],"names":["Movie","model","addNewUser","req","res","newUser","User","body","save","err","user","send","json","addNewMovieWithReview","newMovie","movie","loadSingleMovieData","findOne","id","params","editReview","findOneAndUpdate","_id","new","addReview","$push","safe","upsert","console","log","deleteUserReview","$pull"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AAEA,IAAMA,QAAQ,mBAASC,KAAT,CAAe,OAAf,2BAAd;;AAEO,IAAMC,kCAAa,SAAbA,UAAa,CAACC,GAAD,EAAMC,GAAN,EAAc;AACpC,QAAIC,UAAU,IAAIC,IAAJ,CAASH,IAAII,IAAb,CAAd;;AAEAF,YAAQG,IAAR,CAAa,UAACC,GAAD,EAAMC,IAAN,EAAe;AACxB,YAAID,GAAJ,EAAS;AACLL,gBAAIO,IAAJ,CAASF,GAAT;AACH;AACDL,YAAIQ,IAAJ,CAASF,IAAT;AACH,KALD;AAMH,CATM;;AAWA,IAAMG,wDAAwB,SAAxBA,qBAAwB,CAACV,GAAD,EAAMC,GAAN,EAAc;AAC/C,QAAIU,WAAW,IAAId,KAAJ,CAAUG,IAAII,IAAd,CAAf;;AAEAO,aAASN,IAAT,CAAc,UAACC,GAAD,EAAMM,KAAN,EAAgB;AAC1B,YAAIN,GAAJ,EAAS;AACLL,gBAAIO,IAAJ,CAASF,GAAT;AACH;AACDL,YAAIQ,IAAJ,CAASG,KAAT;AACH,KALD;AAMH,CATM;;AAWA,IAAMC,oDAAsB,SAAtBA,mBAAsB,CAACb,GAAD,EAAMC,GAAN,EAAc;AAC7CJ,UAAMiB,OAAN,CAAc,EAACC,IAAIf,IAAIgB,MAAJ,CAAWD,EAAhB,EAAd,EAAmC,UAACT,GAAD,EAAMM,KAAN,EAAgB;AAC/C,YAAIN,GAAJ,EAAS;AACLL,gBAAIO,IAAJ,CAASF,GAAT;AACH;AACDL,YAAIQ,IAAJ,CAASG,KAAT;AACH,KALD;AAMH,CAPM;;AASA,IAAMK,kCAAa,SAAbA,UAAa,CAACjB,GAAD,EAAMC,GAAN,EAAc;AACpCJ,UAAMqB,gBAAN,CAAuB,EAAEH,IAAIf,IAAIgB,MAAJ,CAAWD,EAAjB,EAAqBI,KAAKnB,IAAIgB,MAAJ,CAAWG,GAArC,EAAvB,EAAmEnB,IAAII,IAAvE,EAA6E,EAAEgB,KAAK,IAAP,EAA7E,EAA4F,UAACd,GAAD,EAAMM,KAAN,EAAgB;AACxG,YAAIN,GAAJ,EAAS;AACLL,gBAAIO,IAAJ,CAASF,GAAT;AACH;AACDL,YAAIQ,IAAJ,CAASG,KAAT;AACH,KALD;AAMH,CAPM;;AASA,IAAMS,gCAAY,SAAZA,SAAY,CAACrB,GAAD,EAAMC,GAAN,EAAc;AACnCJ,UAAMqB,gBAAN,CACI,EAACH,IAAIf,IAAIgB,MAAJ,CAAWD,EAAhB,EADJ,EAEI,EAACO,OAAOtB,IAAII,IAAZ,EAFJ,EAGI,EAACmB,MAAM,IAAP,EAAaC,QAAQ,IAArB,EAA2BJ,KAAK,IAAhC,EAHJ,EAII,UAACd,GAAD,EAAMM,KAAN,EAAgB;AACZ,YAAIN,GAAJ,EAAS;AACLL,gBAAIO,IAAJ,CAASF,GAAT;AACH;AACDmB,gBAAQC,GAAR,CAAY1B,IAAIgB,MAAJ,CAAWD,EAAvB;AACAd,YAAIQ,IAAJ,CAASG,KAAT;AACH,KAVL;AAYH,CAbM;;AAeA,IAAMe,8CAAmB,SAAnBA,gBAAmB,CAAC3B,GAAD,EAAMC,GAAN,EAAc;AAC1CJ,UAAMqB,gBAAN,CACI,EAACH,IAAIf,IAAIgB,MAAJ,CAAWD,EAAhB,EADJ,EAEI,EAACa,OAAO,EAAC,WAAW,EAACrB,MAAMP,IAAIgB,MAAJ,CAAWT,IAAlB,EAAZ,EAAR,EAFJ,EAGI,UAACD,GAAD,EAAMM,KAAN,EAAgB;AACZ,YAAIN,GAAJ,EAAS;AACLL,gBAAIO,IAAJ,CAASF,GAAT;AACH;AACDmB,gBAAQC,GAAR,CAAYd,KAAZ;AACAX,YAAIQ,IAAJ,CAASG,KAAT;AACH,KATL;AAWH,CAZM","file":"userController.js","sourcesContent":["import mongoose from 'mongoose';\nimport { MovieSchema, ReviewSchema } from './movieSchema';\n\nconst Movie = mongoose.model('Movie', MovieSchema);\n\nexport const addNewUser = (req, res) => {\n    let newUser = new User(req.body);\n\n    newUser.save((err, user) => {\n        if (err) {\n            res.send(err);\n        }\n        res.json(user);\n    });\n};\n\nexport const addNewMovieWithReview = (req, res) => {\n    let newMovie = new Movie(req.body)\n\n    newMovie.save((err, movie) => {\n        if (err) {\n            res.send(err)\n        }\n        res.json(movie)\n    })\n}\n\nexport const loadSingleMovieData = (req, res) => {\n    Movie.findOne({id: req.params.id}, (err, movie) => {\n        if (err) {\n            res.send(err);\n        }\n        res.json(movie);\n    });\n}\n\nexport const editReview = (req, res) => {\n    Movie.findOneAndUpdate({ id: req.params.id, _id: req.params._id }, req.body, { new: true }, (err, movie) => {\n        if (err) {\n            res.send(err);\n        }\n        res.json(movie);\n    })\n}\n\nexport const addReview = (req, res) => {\n    Movie.findOneAndUpdate(\n        {id: req.params.id},\n        {$push: req.body},\n        {safe: true, upsert: true, new: true},\n        (err, movie) => {\n            if (err) {\n                res.send(err)\n            }\n            console.log(req.params.id)\n            res.json(movie)\n        }\n    )\n}\n\nexport const deleteUserReview = (req, res) => {\n    Movie.findOneAndUpdate(\n        {id: req.params.id},\n        {$pull: {'reviews': {user: req.params.user}}},\n        (err, movie) => {\n            if (err) {\n                res.send(err)\n            }\n            console.log(movie)\n            res.json(movie)\n        }\n    )\n}"]}